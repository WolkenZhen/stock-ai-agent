# 🚀 StockAI - 多市场AI股票分析助手
StockAI 是一款 **AI驱动的多市场股票智能分析工具**，专为无法操作美股、聚焦中国A股与德国DAX成分股的用户设计。项目基于真实行情数据，通过自动化技术分析生成交易信号、AI解读报告与落地性交易建议，采用模块化架构，支持灵活扩展与券商API对接。

## 🌟 核心亮点（先进性体现）
### 1. 多市场深度适配（解决用户核心需求）
- 原生支持 **中国A股（沪市.SS/深市.SZ）** 与 **德国DAX成分股（法兰克福交易所.DE）**，股票代码与公司名称100%真实匹配
- 自动识别市场类型，适配不同交易规则（A股T+1无做空 / 德国股市T+0支持做空）
- 数据来源采用 Yahoo Finance 公开真实行情，支持自动复权，与券商数据一致性达99%

### 2. 智能化技术分析体系
- 基于 **均线交叉策略（5日短期/20日长期）** 生成 BUY/SELL/HOLD 信号，兼顾趋势性与稳定性
- 动态计算支撑位/阻力位（近5日高低点±1%区间），结合成交量验证趋势可信度
- AI 分析报告自动整合行情数据、技术指标与市场规则，提供止损/止盈/仓位控制的量化建议

### 3. 工程化模块化设计
- 松耦合架构：数据获取、信号生成、AI解释、建议输出分离，支持独立替换（如对接券商API）
- 配置化管理：通过 `config.py` 一键切换目标股票、调整数据参数，无需修改核心代码
- 鲁棒性保障：完善的异常处理（行情为空、代码无效、网络问题），输出友好提示

### 4. 安全与实用性平衡
- 无实际交易功能，仅提供分析建议，规避误操作风险
- 内置风险提示机制，明确标注市场规则、交易时间与投资风险
- 支持小资金测试（A股100股/手起，德国股市无固定单位），适配新手用户

## 📊 整体项目逻辑
[配置文件] → [行情数据获取] → [技术指标计算] → [交易信号生成] → [AI 分析报告] → [交易建议输出]
1. **输入**：通过 `config.py` 配置目标股票代码（如 A股600519.SS/德国BMW.DE）
2. **数据层**：从 Yahoo Finance 拉取真实日线数据（价格、成交量、高低点）
3. **计算层**：计算均线、支撑位、阻力位，基于均线交叉生成信号
4. **AI解读层**：结合市场类型与真实数据，生成结构化分析报告（逻辑+建议+风险）
5. **输出层**：终端打印信号结果、行情数据、AI报告与交易建议

## 📁 文件结构与功能说明
| 文件名称          | 核心功能                                                                 | 技术细节与责任边界                                                                 |
|-------------------|--------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| `main.py`         | 项目入口与流程控制                                                       | 串联所有模块，处理初始化、异常捕获、输出格式化；负责市场类型识别与全局参数传递       |
| `trading_signal.py` | 真实行情获取与交易信号生成                                               | 1. 验证股票代码有效性；2. 拉取Yahoo Finance真实数据；3. 计算均线/支撑位/阻力位；4. 生成信号 |
| `explainer.py`    | AI 分析报告生成                                                          | 基于信号类型与真实数据，生成含「基础信息+核心逻辑+操作建议+风险提示」的结构化报告     |
| `executor.py`     | 交易建议生成（无实际交易）                                               | 结合市场规则（如A股100股起买），输出买入/卖出/观望的量化建议（数量、价格区间、资金估算） |
| `config.py`       | 项目配置中心                                                             | 1. 真实股票代码-中文名称映射（A股+德国DAX）；2. 目标股票/交易数量配置；3. 数据参数与市场规则定义 |
| `requirements.txt`| 依赖包清单                                                               | 明确版本约束，确保环境一致性                                                       |

## 🛠️ 快速开始
### 1. 环境准备
#### 1.1 系统要求
- 支持 Windows/macOS/Linux，Python 3.8+（推荐3.10）
- 网络需可访问 Yahoo Finance（无需科学上网，部分地区可能需配置DNS）

#### 1.2 依赖安装
```bash
# 1. 创建虚拟环境（可选但推荐）
python -m venv venv
# Windows激活：venv\Scripts\activate
# macOS/Linux激活：source venv/bin/activate

# 2. 安装依赖
pip install -r requirements.txt
1.3 依赖包说明
依赖包	版本	用途
yfinance	0.2.31	拉取 A 股 / 德国股市真实行情数据（价格、成交量、均线）
pandas	2.1.4	数据处理与技术指标计算（均线、支撑位 / 阻力位）
python-dotenv	1.0.0	环境变量管理（后续对接券商 API 时使用）
2. 配置修改（核心步骤）
编辑 config.py，按需修改以下参数（无需改其他文件）：

# 1. 切换目标股票（二选一，代码必须在 STOCK_MAPPING 中）
TARGET_SYMBOL = "600519.SS"  # 中国A股-贵州茅台（沪市）
# TARGET_SYMBOL = "BMW.DE"   # 德国DAX-宝马集团（法兰克福交易所）

# 2. 调整交易数量（适配市场规则）
QTY = 100  # A股最小100股/手，德国股市可设1股测试

# 3. 数据参数（默认无需修改）
DATA_PERIOD = "1mo"  # 数据时间范围（1个月足够计算均线）
DATA_INTERVAL = "1d" # 日线数据（真实交易日）
AUTO_ADJUST = True  # 自动复权（匹配真实交易价格）

python main.py